<!DOCTYPE html>
<html lang="en">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">




<title>Hugo添加短代码 | 阿波尔的博客</title>

<link rel="stylesheet" href="https://www.zaqizaba.xyz/css/styles.css">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" 
integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous"></script>

<script async src="https://cdn.staticfile.org/mermaid/8.8.2/mermaid.min.js"></script>
</head>
<body>


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/zenburn.min.css" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script src="https://www.zaqizaba.xyz/js/highlight.js"></script>


<html>
<script>
MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']]
  },
  svg: {
    fontCache: 'global'
  }
};
</script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.bootcdn.net/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js"></script>
</html>

<link href="https://cdn.bootcss.com/highlight.js/9.12.0/styles/monokai.min.css" rel="stylesheet">
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/languages/tex.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


<link type="text/css" rel="stylesheet" href="https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/jsSocials/1.5.0/jssocials.css" />
<link type="text/css" rel="stylesheet" href="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/jsSocials/1.5.0/jssocials-theme-minima.css" />
<script type="text/javascript" src="https://www.zaqizaba.xyz/js/jssocials.js"></script>



<script src="https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/jquery/3.6.0/jquery.min.js"></script>
<link rel="stylesheet" href="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/fancybox/3.5.7/jquery.fancybox.min.css" />
<script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/fancybox/3.5.7/jquery.fancybox.min.js"></script>








<script>
    
    Array.from(document.getElementsByClassName('language-mermaid')).forEach(el => {
        el.parentElement.outerHTML = `<div class="mermaid">${el.innerText}</div>`
    })
</script>
<style>
 
.mermaid svg {
    display: block;
    margin: auto;
}
</style>
</body>


<div class="container">
    <nav class="navbar level">
      <div class="navbar-brand">
          <a class="nav-item" href="https://www.zaqizaba.xyz"><h1 class="title is-3">阿波尔的博客</h1></a>
      </div>           
      <div class="navbar-menu has-text-centered is-active">
          <div class="navbar-end is-centered">
              
                <a href="https://www.zaqizaba.xyz/about" rel="me">
                  <span class="icon">
                    <i class="fas fa-info"></i>
                  </span>
                </a>
              
                <a href="https://www.zaqizaba.xyz/archives" rel="me">
                  <span class="icon">
                    <i class="fas fa-archive"></i>
                  </span>
                </a>
              
                <a href="https://www.zaqizaba.xyz/comments" rel="me">
                  <span class="icon">
                    <i class="fas fa-comment"></i>
                  </span>
                </a>
              
                <a href="https://github.com/flight025" rel="me">
                  <span class="icon">
                    <i class="fab fa-github"></i>
                  </span>
                </a>
              
                <a href="https://www.zhihu.com/people/a-gan-jing-shen" rel="me">
                  <span class="icon">
                    <i class="fab fa-zhihu"></i>
                  </span>
                </a>
              
                <a href="https://twitter.com/aidehuaerzi1" rel="me">
                  <span class="icon">
                    <i class="fab fa-twitter"></i>
                  </span>
                </a>
              
                <a href="https://www.zaqizaba.xyz/index.xml" rel="me">
                  <span class="icon">
                    <i class="fa fa-rss"></i>
                  </span>
                </a>
              
           </div>
      </div>
    </nav>
  </div>

<div class="container">
  <h2 class="subtitle is-6">February 15, 2021</h2>
  <h1 class="subtitle is-size-4-mobile is-size-3-desktop">Hugo添加短代码</h1>
  <div class="content">
    <img src="https://css-1252531711.cos.ap-chongqing.myqcloud.com/picture/maxresdefault.jpg" style="zoom:70%;" />
<p>写在之前， hugo shortcodes中文意译即为雨果博客短代码，是一种先配置文件，通过在文章中插入短代码模式，来实现纯文字，歌曲，文章，个人社交文字转发，以及视频，播客等在个人博客上显示的一种方式。</p>
<h3 id="以下几个短代码的应用">以下几个短代码的应用</h3>
<p>上次我在“<a href="https://www.zaqizaba.xyz/posts/hugo%E8%A7%A3%E5%86%B3%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90%E4%B8%8D%E6%98%BE%E7%A4%BA%E9%97%AE%E9%A2%98/">Hugo解决网易云音乐不显示问题</a>”这篇博客中说了，开启HTML外链引用必须先添加：</p>
<pre tabindex="0"><code>1.[markup.goldmark.renderer]
2.unsafe= true
</code></pre><p>然后自己再在网易云音乐引入 <code> iframe</code>实现在hugo博客上显示音乐。但是现在，有一种更好的方式，hugo提倡引入外链可以用短代码。</p>
<p>方式为：新建<code>/layouts/shortcodes/music.html</code>，在其中引入：</p>
<pre tabindex="0"><code>{{- $scratch := .Page.Scratch.Get &#34;scratch&#34; -}}
&lt;!-- require APlayer --&gt;
&lt;link rel=&#34;stylesheet&#34; href=&#34;https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css&#34;&gt;
&lt;style type=&#34;text/css&#34;&gt;.dark-theme .aplayer{background:#212121}.dark-theme .aplayer.aplayer-withlist .aplayer-info{border-bottom-color:#5c5c5c}.dark-theme .aplayer.aplayer-fixed .aplayer-list{border-color:#5c5c5c}.dark-theme .aplayer .aplayer-body{background-color:#212121}.dark-theme .aplayer .aplayer-info{border-top-color:#212121}.dark-theme .aplayer .aplayer-info .aplayer-music .aplayer-title{color:#fff}.dark-theme .aplayer .aplayer-info .aplayer-music .aplayer-author{color:#fff}.dark-theme .aplayer .aplayer-info .aplayer-controller .aplayer-time{color:#eee}.dark-theme .aplayer .aplayer-info .aplayer-controller .aplayer-time .aplayer-icon path{fill:#eee}.dark-theme .aplayer .aplayer-list{background-color:#212121}.dark-theme .aplayer .aplayer-list::-webkit-scrollbar-thumb{background-color:#999}.dark-theme .aplayer .aplayer-list::-webkit-scrollbar-thumb:hover{background-color:#bbb}.dark-theme .aplayer .aplayer-list li{color:#fff;border-top-color:#666}.dark-theme .aplayer .aplayer-list li:hover{background:#4e4e4e}.dark-theme .aplayer .aplayer-list li.aplayer-list-light{background:#6c6c6c}.dark-theme .aplayer .aplayer-list li .aplayer-list-index{color:#ddd}.dark-theme .aplayer .aplayer-list li .aplayer-list-author{color:#ddd}.dark-theme .aplayer .aplayer-lrc{text-shadow:-1px -1px 0 #666}.dark-theme .aplayer .aplayer-lrc:before{background:-moz-linear-gradient(top, #212121 0%, rgba(33,33,33,0) 100%);background:-webkit-linear-gradient(top, #212121 0%, rgba(33,33,33,0) 100%);background:linear-gradient(to bottom, #212121 0%, rgba(33,33,33,0) 100%);filter:progid:DXImageTransform.Microsoft.gradient( startColorstr=&#39;#212121&#39;, endColorstr=&#39;#00212121&#39;,GradientType=0 )}.dark-theme .aplayer .aplayer-lrc:after{background:-moz-linear-gradient(top, rgba(33,33,33,0) 0%, rgba(33,33,33,0.8) 100%);background:-webkit-linear-gradient(top, rgba(33,33,33,0) 0%, rgba(33,33,33,0.8) 100%);background:linear-gradient(to bottom, rgba(33,33,33,0) 0%, rgba(33,33,33,0.8) 100%);filter:progid:DXImageTransform.Microsoft.gradient( startColorstr=&#39;#00212121&#39;, endColorstr=&#39;#cc212121&#39;,GradientType=0 )}.dark-theme .aplayer .aplayer-lrc p{color:#fff}.dark-theme .aplayer .aplayer-miniswitcher{background:#484848}.dark-theme .aplayer .aplayer-miniswitcher .aplayer-icon path{fill:#eee}&lt;/style&gt;
&lt;script src=&#34;https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js&#34;&gt;&lt;/script&gt;
&lt;!-- require MetingJS --&gt;
&lt;script src=&#34;https://cdn.jsdelivr.net/npm/meting@2.0.1/dist/Meting.min.js&#34;&gt;&lt;/script&gt;

{{- if .IsNamedParams -}}
    {{- if .Get &#34;url&#34; -}}
        &lt;meting-js url=&#34;{{ .Get `url` }}&#34; name=&#34;{{ .Get `name` }}&#34; artist=&#34;{{ .Get `artist` }}&#34; cover=&#34;{{ .Get `cover` }}&#34; theme=&#34;{{ .Get `theme` | default `#2980b9` }}&#34;
        {{- with .Get &#34;fixed&#34; }} fixed=&#34;{{ . }}&#34;{{ end -}}
        {{- with .Get &#34;mini&#34; }} mini=&#34;{{ . }}&#34;{{ end -}}
        {{- with .Get &#34;autoplay&#34; }} autoplay=&#34;{{ . }}&#34;{{ end -}}
        {{- with .Get &#34;volume&#34; }} volume=&#34;{{ . }}&#34;{{ end -}}
        {{- with .Get &#34;mutex&#34; }} mutex=&#34;{{ . }}&#34;{{ end -}}
        &gt;&lt;/meting-js&gt;
    {{- else if .Get &#34;auto&#34; -}}
        &lt;meting-js auto=&#34;{{ .Get `auto` }}&#34; theme=&#34;{{ .Get `theme` | default `#2980b9` }}&#34;
        {{- with .Get &#34;fixed&#34; }} fixed=&#34;{{ . }}&#34;{{ end -}}
        {{- with .Get &#34;mini&#34; }} mini=&#34;{{ . }}&#34;{{ end -}}
        {{- with .Get &#34;autoplay&#34; }} autoplay=&#34;{{ . }}&#34;{{ end -}}
        {{- with .Get &#34;loop&#34; }} loop=&#34;{{ . }}&#34;{{ end -}}
        {{- with .Get &#34;order&#34; }} order=&#34;{{ . }}&#34;{{ end -}}
        {{- with .Get &#34;volume&#34; }} volume=&#34;{{ . }}&#34;{{ end -}}
        {{- with .Get &#34;mutex&#34; }} mutex=&#34;{{ . }}&#34;{{ end -}}
        {{- with .Get &#34;list-folded&#34; }} list-folded=&#34;{{ . }}&#34;{{ end -}}
        {{- with .Get &#34;list-max-height&#34; }} list-max-height=&#34;{{ . }}&#34;{{ end -}}
        &gt;&lt;/meting-js&gt;
    {{- else -}}
        &lt;meting-js server=&#34;{{ .Get `server` }}&#34; type=&#34;{{ .Get `type` }}&#34; id=&#34;{{ .Get `id` }}&#34; theme=&#34;{{ .Get `theme` | default `#2980b9` }}&#34;
        {{- with .Get &#34;fixed&#34; }} fixed=&#34;{{ . }}&#34;{{ end -}}
        {{- with .Get &#34;mini&#34; }} mini=&#34;{{ . }}&#34;{{ end -}}
        {{- with .Get &#34;autoplay&#34; }} autoplay=&#34;{{ . }}&#34;{{ end -}}
        {{- with .Get &#34;loop&#34; }} loop=&#34;{{ . }}&#34;{{ end -}}
        {{- with .Get &#34;order&#34; }} order=&#34;{{ . }}&#34;{{ end -}}
        {{- with .Get &#34;volume&#34; }} volume=&#34;{{ . }}&#34;{{ end -}}
        {{- with .Get &#34;mutex&#34; }} mutex=&#34;{{ . }}&#34;{{ end -}}
        {{- with .Get &#34;list-folded&#34; }} list-folded=&#34;{{ . }}&#34;{{ end -}}
        {{- with .Get &#34;list-max-height&#34; }} list-max-height=&#34;{{ . }}&#34;{{ end -}}
        &gt;&lt;/meting-js&gt;
    {{- end -}}
{{- else if strings.HasSuffix (.Get 0) &#34;http&#34; -}}
    &lt;meting-js auto=&#34;{{ .Get 0 }}&#34; theme=&#34;#2980b9&#34;&gt;&lt;/meting-js&gt;
{{- else -}}
    &lt;meting-js server=&#34;{{ .Get 0 }}&#34; type=&#34;{{ .Get 1 }}&#34; id=&#34;{{ .Get 2 }}&#34; theme=&#34;#2980b9&#34;&gt;&lt;/meting-js&gt;
{{- end -}}
{{- $scratch.Set &#34;music&#34; true -}}
</code></pre><p>此博客音乐代码实现，我参考<a href="https://github.com/lmm214/immmmm/blob/master/themes/hello-friend/layouts/shortcodes/music.html">木木木木木</a>的GitHub库。</p>
<p>短代码模板为</p>
<pre tabindex="0"><code>1  {/{&lt; music auto=&#34;https://music.163.com/#/album?id=xxxxxx&#34; &gt;}\}(把第一个左右花括号内“/\”去掉即可，HTTPs后即为网站id）
</code></pre><p>例如：</p>
<p><strong>
<link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">
<style type="text/css">.dark-theme .aplayer{background:#212121}.dark-theme .aplayer.aplayer-withlist .aplayer-info{border-bottom-color:#5c5c5c}.dark-theme .aplayer.aplayer-fixed .aplayer-list{border-color:#5c5c5c}.dark-theme .aplayer .aplayer-body{background-color:#212121}.dark-theme .aplayer .aplayer-info{border-top-color:#212121}.dark-theme .aplayer .aplayer-info .aplayer-music .aplayer-title{color:#fff}.dark-theme .aplayer .aplayer-info .aplayer-music .aplayer-author{color:#fff}.dark-theme .aplayer .aplayer-info .aplayer-controller .aplayer-time{color:#eee}.dark-theme .aplayer .aplayer-info .aplayer-controller .aplayer-time .aplayer-icon path{fill:#eee}.dark-theme .aplayer .aplayer-list{background-color:#212121}.dark-theme .aplayer .aplayer-list::-webkit-scrollbar-thumb{background-color:#999}.dark-theme .aplayer .aplayer-list::-webkit-scrollbar-thumb:hover{background-color:#bbb}.dark-theme .aplayer .aplayer-list li{color:#fff;border-top-color:#666}.dark-theme .aplayer .aplayer-list li:hover{background:#4e4e4e}.dark-theme .aplayer .aplayer-list li.aplayer-list-light{background:#6c6c6c}.dark-theme .aplayer .aplayer-list li .aplayer-list-index{color:#ddd}.dark-theme .aplayer .aplayer-list li .aplayer-list-author{color:#ddd}.dark-theme .aplayer .aplayer-lrc{text-shadow:-1px -1px 0 #666}.dark-theme .aplayer .aplayer-lrc:before{background:-moz-linear-gradient(top, #212121 0%, rgba(33,33,33,0) 100%);background:-webkit-linear-gradient(top, #212121 0%, rgba(33,33,33,0) 100%);background:linear-gradient(to bottom, #212121 0%, rgba(33,33,33,0) 100%);filter:progid:DXImageTransform.Microsoft.gradient( startColorstr='#212121', endColorstr='#00212121',GradientType=0 )}.dark-theme .aplayer .aplayer-lrc:after{background:-moz-linear-gradient(top, rgba(33,33,33,0) 0%, rgba(33,33,33,0.8) 100%);background:-webkit-linear-gradient(top, rgba(33,33,33,0) 0%, rgba(33,33,33,0.8) 100%);background:linear-gradient(to bottom, rgba(33,33,33,0) 0%, rgba(33,33,33,0.8) 100%);filter:progid:DXImageTransform.Microsoft.gradient( startColorstr='#00212121', endColorstr='#cc212121',GradientType=0 )}.dark-theme .aplayer .aplayer-lrc p{color:#fff}.dark-theme .aplayer .aplayer-miniswitcher{background:#484848}.dark-theme .aplayer .aplayer-miniswitcher .aplayer-icon path{fill:#eee}</style>
<script src="https://fastly.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>

<script src="https://fastly.jsdelivr.net/npm/meting@2.0.1/dist/Meting.min.js"></script><meting-js auto="https://music.163.com/#/album?id=496726" theme="#2980b9"></meting-js></strong></p>
<p>再比如，引用bilibili视频，新建<code>/layouts/shortcodes/bilibili.html</code>,在其中引入：</p>
<pre tabindex="0"><code>&lt;div style=&#34;position: relative; padding: 32% 45%;&#34;&gt;
    &lt;iframe style=&#34;position: absolute; width: 100%; height: 100%; left: 0; top: 0;&#34; 
    src=&#34;//player.bilibili.com/player.html?bvid={{.Get 0 }}&amp;page={{ if .Get 1 }}{{.Get 1}}{{ else }}1{{end}}&amp;as_wide=1&amp;high_quality=1&amp;danmaku=1&#34; 
    scrolling=&#34;no&#34; frameborder=&#34;no&#34; framespacing=&#34;0&#34; allowfullscreen=&#34;true&#34;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</code></pre><p>短代码模板为</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>1{/{&lt; <span style="color:#f92672">bilibili</span> <span style="color:#a6e22e">BVXXXXXXXX</span> &gt;}\}(把第一个左右花括号内“/\”去掉即可，BV即为BV号)
</span></span></code></pre></div><p>例如：</p>
<div style="position: relative; padding: 32% 45%;">
    <iframe style="position: absolute; width: 100%; height: 100%; left: 0; top: 0;" 
    src="//player.bilibili.com/player.html?bvid=BV1Ci4y1c7D8&page=1&as_wide=1&high_quality=1&danmaku=1" 
    scrolling="no" frameborder="no" framespacing="0" allowfullscreen="true"></iframe>
</div>
<p>基本上，还有其它短代码模板也类似。基本上都是<code>/layouts/shortcodes/xxx</code>模式,再配置相应的短码id即可。</p>
<hr>
<p>网页参考：1.<a href="https://gohugo.io/content-management/shortcodes/#tweet">hugo短码</a>2.<a href="https://github.com/lmm214/immmmm/blob/master/themes/hello-friend/layouts/shortcodes/music.html">木木木木木的music.html</a></p>
<img src="https://css-1252531711.cos.ap-chongqing.myqcloud.com/picture/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X2pwZy9yTHhHQTg0QlV4bWRHNnRCcmR6eWVacDhaaWNqeVIwMmVhWk1qVVM3RVNCVThOSnBsdFZPQ2ZtQ3VuUm1wUHg2Q1UzMEV5RjhIVVN3OTFBY2dUVk82QmcvNjQw.jfif" alt="go"  />

  </div>
</div>
<div class="container has-text-centered">
    
    <aside><div id="share"></div></aside>
    
    本作品采用<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>进行许可。
</div>

<div id="waline"></div>
<head>
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/waline/2.15.5/waline.js"></script>
  <link
    rel="stylesheet"
    href="//cdnjs.cloudflare.com/ajax/libs/waline/2.15.5/waline.css"
  />
  
</head>
<body>
  
  <div id="waline"></div>
  <script>

 Waline.init({
    el: '#waline',
    pageview: 'true',
    serverURL: 'https://zaqizaba.xyz',
     emoji: 
    [
    'https://gcore.jsdelivr.net/gh/zhheo/Sticker-Heo@main/Sticker-100/',
    'https://gcore.jsdelivr.net/gh/sowhereso/waline-blobcatemojis@1.2/blobs/', 
  ],
  });
</script>
</body>
<section class="section">
  <div class="container has-text-centered">
    <p>&copy; <a href="https://www.zaqizaba.xyz">阿波尔的博客</a>2019-2023</p>
  </div>
</section>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-168102390-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>



